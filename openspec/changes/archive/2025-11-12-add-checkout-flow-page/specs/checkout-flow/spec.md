## ADDED Requirements
### Requirement: 下单页面展示
系统 SHALL 显示下单流程页面，包含商品确认信息、邮箱输入表单和下单按钮。

#### Scenario: 用户访问下单页面
- **GIVEN** 用户从商品详情页点击"立即购买"按钮
- **WHEN** 用户进入下单页面（/checkout）
- **THEN** 系统显示：
  - 商品名称（从查询参数获取）
  - 商品价格（显示原始货币）
  - 货币标识（CNY/USD）
  - 邮箱输入框（必填，带格式验证）
  - "确认下单"按钮（提交按钮）

#### Scenario: 商品信息自动填充
- **GIVEN** 用户从商品详情页携带查询参数访问下单页面
- **WHEN** 页面加载完成
- **THEN** 系统从URL查询参数自动填充：
  - `productId` → 商品ID
  - `productName` → 商品名称
  - `price` → 价格数值
  - `currency` → 货币类型（CNY/USD）

### Requirement: 邮箱收集与验证
系统 SHALL 收集用户邮箱地址，并进行格式验证，确保邮箱格式正确。

#### Scenario: 邮箱格式验证成功
- **GIVEN** 用户在邮箱输入框输入邮箱地址
- **WHEN** 用户输入有效的邮箱格式（如：user@example.com）
- **THEN** 邮箱验证通过，"确认下单"按钮可点击

#### Scenario: 邮箱格式验证失败
- **GIVEN** 用户在邮箱输入框输入无效的邮箱地址
- **WHEN** 用户输入无效的邮箱格式（如：user@、@example.com、user@example）
- **THEN** 系统显示错误提示："请输入有效的邮箱地址"，"确认下单"按钮禁用

#### Scenario: 邮箱输入为空
- **GIVEN** 用户未输入邮箱地址
- **WHEN** 用户尝试点击"确认下单"按钮
- **THEN** 系统显示错误提示："请输入邮箱地址"，提交被阻止

### Requirement: 订单创建
系统 SHALL 根据用户输入的邮箱和页面商品信息创建订单，并与后端API交互完成订单数据持久化。

#### Scenario: 订单创建成功
- **GIVEN** 用户已输入有效邮箱，且商品信息已确认
- **WHEN** 用户点击"确认下单"按钮
- **THEN** 系统：
  1. 发送POST请求到 `/api/v1/checkout/create`
  2. 包含参数：`{ productId, productName, email, price, currency }`
  3. 显示加载状态（按钮显示"处理中..."）
  4. 订单创建成功后，自动跳转到支付页面
  5. 支付页面URL包含订单ID参数（如：`/payment?orderId=123`）

#### Scenario: 订单创建API失败
- **GIVEN** 用户已输入有效邮箱，且商品信息已确认
- **WHEN** 用户点击"确认下单"按钮
- **AND** API请求失败或返回错误
- **THEN** 系统：
  1. 隐藏加载状态
  2. 显示错误提示："订单创建失败，请稍后重试"
  3. 按钮恢复为"确认下单"状态
  4. 不进行页面跳转

#### Scenario: 网络连接异常
- **GIVEN** 用户已输入有效邮箱，且商品信息已确认
- **WHEN** 用户点击"确认下单"按钮
- **AND** 网络连接超时或断开
- **THEN** 系统：
  1. 显示错误提示："网络连接失败，请检查网络后重试"
  2. 按钮恢复为"确认下单"状态
  3. 提供重试按钮

### Requirement: 页面数据持久化
系统 SHALL 在下单过程中保持用户输入的邮箱地址，防止意外丢失。

#### Scenario: 页面刷新后邮箱保留
- **GIVEN** 用户已输入有效邮箱地址
- **WHEN** 用户刷新页面或返回后重新进入
- **THEN** 系统保留用户之前输入的邮箱地址在输入框中

### Requirement: 响应式设计
系统 SHALL 在不同屏幕尺寸下正常显示下单表单，确保移动端和桌面端都有良好的用户体验。

#### Scenario: 移动端显示
- **GIVEN** 用户使用手机浏览器访问下单页面
- **WHEN** 页面加载完成
- **THEN** 下单表单在移动端正常显示：
  - 商品信息垂直排列
  - 邮箱输入框占满屏幕宽度
  - 按钮宽度适配移动端

#### Scenario: 桌面端显示
- **GIVEN** 用户使用桌面浏览器访问下单页面
- **WHEN** 页面加载完成
- **THEN** 下单表单在桌面端合理布局：
  - 商品信息居中显示
  - 邮箱输入框宽度适中
  - 按钮与输入框对齐