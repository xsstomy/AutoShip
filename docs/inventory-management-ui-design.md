# 库存管理页面 UI 设计方案

## 设计概述
库存管理页面为管理员提供完整的库存管理功能，包括批量导入、查看、添加和删除库存。页面设计遵循与商品管理页面相同的视觉和交互模式。

## 整体布局

### 1. 页面结构
```
┌─────────────────────────────────────────────┐
│ Header Navigation Bar                       │
│ - 返回按钮                                  │
│ - 页面标题: 库存管理                        │
│ - 管理员信息 + 登出按钮                     │
└─────────────────────────────────────────────┘
┌─────────────────────────────────────────────┐
│ Main Content Area                           │
│ ┌─────────────────────────────────────────┐ │
│ │ Search & Filter Bar                     │ │
│ │ - 商品搜索框                             │ │
│ │ - 库存状态筛选（全部/有库存/低库存/无库存）│ │
│ │ - 刷新按钮                               │ │
│ └─────────────────────────────────────────┘ │
│ ┌─────────────────────────────────────────┐ │
│ │ Quick Actions Bar                       │ │
│ │ - 批量导入按钮                           │ │
│ │ - 添加库存按钮                           │ │
│ │ - 导出库存报告                           │ │
│ └─────────────────────────────────────────┘ │
│ ┌─────────────────────────────────────────┐ │
│ │ Inventory Table                         │ │
│ │ - 商品信息                               │ │
│ │ - 库存数量                               │ │
│ │ - 库存状态                               │ │
│ │ - 最后更新时间                           │ │
│ │ - 操作（查看详情/添加/删除）             │ │
│ └─────────────────────────────────────────┘ │
│ ┌─────────────────────────────────────────┐ │
│ │ Pagination Bar                          │ │
│ │ - 页码信息                               │ │
│ │ - 上一页/下一页按钮                       │ │
│ └─────────────────────────────────────────┘ │
│ ┌─────────────────────────────────────────┐ │
│ │ Import Modal                            │ │
│ │ - 文件上传区域                           │ │
│ │ - 支持格式说明                           │ │
│ │ - 进度条                                 │ │
│ │ - 结果反馈                               │ │
│ └─────────────────────────────────────────┘ │
│ ┌─────────────────────────────────────────┐ │
│ │ Inventory Detail Modal                  │ │
│ │ - 库存列表                               │ │
│ │ - 卡密/文本内容                          │ │
│ │ - 使用状态                               │ │
│ │ - 删除选中项                             │ │
│ └─────────────────────────────────────────┘ │
│ ┌─────────────────────────────────────────┐ │
│ │ Add Inventory Modal                     │ │
│ │ - 商品选择                               │ │
│ │ - 输入方式（文本框/文件上传）             │ │
│ │ - 库存内容输入                           │ │
│ └─────────────────────────────────────────┘ │
└─────────────────────────────────────────────┘
```

## 页面组件设计

### 1. Header Navigation Bar
- **位置**: 页面顶部
- **内容**:
  - 左侧: 返回按钮 + "库存管理"标题
  - 右侧: 当前管理员用户名 + 登出按钮
- **样式**: 白色背景，阴影效果，与商品管理页面保持一致

### 2. Search & Filter Bar
- **位置**: 主内容区顶部
- **内容**:
  - 商品名称搜索框（placeholder: "搜索商品名称..."）
  - 库存状态筛选下拉框：
    - 全部
    - 有库存
    - 低库存（<10）
    - 无库存
  - 刷新按钮（蓝色）
- **样式**: 白色背景，圆角边框，与商品管理页面一致

### 3. Quick Actions Bar
- **位置**: 搜索栏下方
- **内容**:
  - "批量导入库存"按钮（主按钮，蓝色）
  - "手动添加库存"按钮（次要按钮，绿色）
  - "导出库存报告"按钮（次要按钮，灰色）
- **样式**: 白色背景，圆角边框，左对齐排列

### 4. Inventory Table
- **位置**: 主内容区中央
- **列设计**:
  1. **商品信息**
     - 商品名称（加粗）
     - 商品描述（灰色，小字号）
     - 商品类型（卡密/下载链接/许可证）
     - 状态（在售/停售）
  2. **库存数量**
     - 可用库存（绿色数字）
     - 总库存数（灰色小字）
     - 已使用数（红色小字）
  3. **库存状态**
     - 状态标签：
       - ✅ 库存充足（绿色）
       - ⚠️ 库存偏低（黄色）
       - 🔥 库存紧张（橙色）
       - ⛔ 已售罄（红色）
  4. **最后更新时间**
     - 格式：YYYY-MM-DD HH:mm:ss
     - 如果从未更新，显示 "-"
  5. **操作**
     - "查看详情"链接（蓝色）
     - "添加库存"链接（绿色）
     - "删除库存"链接（红色）

### 5. 批量导入模态框 (Import Modal)
- **标题**: "批量导入库存"
- **内容**:
  - 商品选择下拉框
  - 文件上传区域（拖拽或点击上传）
    - 支持格式：CSV, TXT
    - 文件大小限制：10MB
  - 格式说明区域：
    ```
    支持格式说明：
    1. 每行一个库存项
    2. 支持的格式：
       - 卡密: KEY-12345-ABCDE
       - 文本: 任意文本内容
       - 链接: https://example.com/file.zip
    3. 示例：
       CARD-001-XXXXX
       CARD-002-YYYYY
       下载链接：https://...
    ```
  - 进度条（上传和解析时显示）
  - 结果反馈区域：
    - 成功数量（绿色）
    - 失败数量（红色）
    - 失败详情列表
- **按钮**:
  - 取消
  - 开始导入（蓝色，导入时显示进度）

### 6. 库存详情模态框 (Inventory Detail Modal)
- **标题**: "库存详情 - {商品名称}"
- **内容**:
  - 库存统计信息（顶部卡片）
    - 总数量
    - 可用数量
    - 已使用数量
  - 库存列表（表格）
    - 序号
    - 库存内容（卡密/文本）
    - 使用状态（未使用/已使用）
    - 使用时间（如果已使用）
    - 复选框（用于批量删除）
  - 分页（如果库存数量过多）
- **按钮**:
  - 关闭
  - 删除选中项（红色，危险操作）

### 7. 添加库存模态框 (Add Inventory Modal)
- **标题**: "添加库存 - {商品名称}"
- **内容**:
  - 输入方式选择标签页：
    - 文本框输入
    - 文件上传
  - **文本框输入模式**:
    - 大文本域（支持多行）
    - 每行一个库存项
  - **文件上传模式**:
    - 文件上传区域
    - 格式说明（同批量导入）
  - 库存内容预览
- **按钮**:
  - 取消
  - 保存

## 交互设计

### 1. 页面加载
- 显示加载动画（旋转圆圈 + "加载中..."文本）
- 加载完成后显示数据表格

### 2. 搜索和筛选
- 实时搜索（输入后 500ms 触发）
- 筛选后自动刷新表格
- 支持清空搜索条件

### 3. 批量导入流程
1. 点击"批量导入库存"按钮
2. 弹出模态框
3. 选择商品
4. 上传文件
5. 显示文件预览
6. 点击"开始导入"
7. 显示进度条
8. 显示导入结果（成功/失败统计）
9. 点击"关闭"返回列表

### 4. 查看库存详情
1. 点击"查看详情"链接
2. 弹出模态框
3. 显示库存列表
4. 可选择库存项进行删除
5. 确认删除后刷新列表

### 5. 添加库存
1. 点击"添加库存"按钮或"查看详情"中的添加按钮
2. 弹出模态框
3. 输入库存内容
4. 保存后刷新列表

## 状态管理

### 1. 页面状态
- `loading`: boolean - 页面加载状态
- `error`: string | null - 错误信息
- `products`: ProductWithInventory[] - 商品列表（包含库存信息）
- `page`: number - 当前页码
- `totalPages`: number - 总页数
- `searchTerm`: string - 搜索关键词
- `filterStatus`: string - 库存状态筛选

### 2. 模态框状态
- `showImportModal`: boolean - 是否显示导入模态框
- `showDetailModal`: boolean - 是否显示详情模态框
- `showAddModal`: boolean - 是否显示添加模态框
- `selectedProduct`: Product | null - 当前选中的商品
- `importProgress`: number - 导入进度（0-100）
- `importResult`: ImportResult | null - 导入结果

## 响应式设计

### 1. 桌面端 (≥1024px)
- 完整表格显示
- 所有列正常显示
- 水平滚动（如果需要）

### 2. 平板端 (768px - 1023px)
- 表格列可能需要滚动
- 模态框全屏显示
- 搜索栏可能换行

### 3. 移动端 (<768px)
- 卡片式列表代替表格
- 操作按钮居中显示
- 模态框全屏显示
- 简化搜索栏（仅搜索框）

## 设计规范

### 1. 颜色方案
- 主色：蓝色 (#3B82F6)
- 成功：绿色 (#10B981)
- 警告：黄色 (#F59E0B)
- 危险：红色 (#EF4444)
- 背景：灰色 (#F9FAFB)
- 文字：深灰色 (#1F2937)

### 2. 字体大小
- 标题：text-xl (20px)
- 正文：text-sm (14px)
- 辅助文字：text-xs (12px)
- 按钮：text-sm (14px)

### 3. 间距
- 页面边距：max-w-7xl mx-auto px-4 sm:px-6 lg:px-8
- 组件间距：mb-6 (24px)
- 元素间距：space-y-4 (16px)
- 按钮间距：space-x-3 (12px)

### 4. 圆角
- 按钮：rounded-md
- 输入框：rounded-md
- 卡片：rounded-lg
- 模态框：rounded-lg

### 5. 阴影
- 卡片：shadow
- 模态框：shadow-xl
- 按钮悬停：hover:shadow-md

## 错误处理

### 1. 网络错误
- 显示红色错误提示框
- 包含错误详情
- 提供重试按钮

### 2. 权限错误
- 显示"权限不足"提示
- 提供返回按钮

### 3. 导入错误
- 在模态框中显示错误信息
- 列出具体的错误行和原因
- 允许用户修复后重新上传

### 4. 删除确认
- 二次确认弹窗
- 危险操作用红色突出显示
- 明确说明操作不可撤销

## 可访问性

### 1. 键盘导航
- Tab 键顺序合理
- 支持 Enter 和 Space 键操作
- 模态框可 ESC 键关闭

### 2. 屏幕阅读器
- 为按钮和链接提供 aria-label
- 表单输入提供 label
- 状态变化有 aria-live 提示

### 3. 对比度
- 所有文字与背景对比度 ≥ 4.5:1
- 按钮文字与背景对比度 ≥ 4.5:1
